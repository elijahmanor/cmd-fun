# Shell Tips & Tricks

<!--

TODO: Other ideas for this module

## Add npm version to oh-my-zsh theme

-->

---

## Quickly switch to previous git branch

<Appear top={5}>
    <Highlight
        top={0}
        left={4}
        pwd="~/myrepo"
        git="feature-cool-stuff"
        command={`git commit -am "Amazing thing"`}
    />
    <Highlight
        top={2}
        left={4}
        pwd="~/myrepo"
        git="feature-cool-stuff"
        command="git checkout master"
    />
    <Highlight
        top={4}
        left={4}
        pwd="~/myrepo"
        git="master"
        command="# How do I get back to previous branch quickly!?!"
    />
    <Highlight
        top={6}
        left={4}
        pwd="~/myrepo"
        git="master"
        command="git checkout -"
    />
    <Highlight top={8} left={4} pwd="~/myrepo" git="feature-cool-stuff" />
</Appear>

---

## Quickly cd to a newly created directory

<Appear top={5}>
    <Highlight
        top={0}
        left={4}
        pwd="~/some/really/deeply/nested/place"
        command="cd ~/myrepo"
    />
    <Highlight top={2} left={4} pwd="~/myrepo" command="npm install" />
    <Highlight
        top={4}
        left={4}
        pwd="~/myrepo"
        command="# How do I get back to previous directory quickly!?!"
    />
    <Highlight top={6} left={4} pwd="~/myrepo" command="cd -" />
    <Highlight top={8} left={4} pwd="~/some/really/deeply/nested/place" />
</Appear>

---

## Use Unix brace expansion - Basics

<Appear top={5}>
    <Highlight top={0} left={4} command="echo {1..8}" />
    <Highlight top={2} left={4} command="echo 1 2 3 4 5 6 7 8" />
    <Highlight top={4} left={4} command="echo {one,three,five}" />
    <Highlight top={6} left={4} command="echo one three five" />
    <Highlight top={8} left={4} command="echo {a..c}{a..z}" />
    <Highlight top={10} left={4} command="echo aa ab ac ba bb bc ca cb cc" />
</Appear>

---

## Use Unix brace expansion - Practical

<Appear top={5}>
    <Highlight top={0} left={4} command="touch index.{html,css,js}" />
    <Highlight top={2} left={4} command="touch index.html index.css index.js" />
    <Highlight
        top={4}
        left={4}
        command="npm install eslint{,-config-react-app} eslint-plugin-{react,react-hooks}"
    />
    <Highlight
        top={6}
        left={4}
        command="npm install eslint eslint-config-react-app eslint-plugin-react eslint-plugin-react-hooks"
    />
    <Highlight top={8} left={4} command="touch file{1..5}.txt" />
    <Highlight
        top={10}
        left={4}
        command="touch file1.txt file2.txt file3.txt file4.txt file5.txt"
    />
</Appear>

---

## Switch to z-shell using Oh-My-Zsh

<text top={5} left={0}>
    Oh My ZSH! ( https://ohmyz.sh/ ) - Drop-in replacement for Bash
</text>
<text top={7} left={0}>
    macOS Catalina now defaults to zsh instead of bash, but oh-my-zsh is still
    recommended
</text>
<Highlight
    top={9}
    left={4}
    command='sh -c "$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"'
/>
<CopyButton
    top={11}
    left={0}
    textToCopy='sh -c "$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"'
/>

---

## Bash Tab Completion

<Appear top={5}>
    <Highlight top={0} left={4} command="cat test<tab>" />
    <Highlight top={2} left={4} command="cat test-file.txt" />
    <Highlight top={4} left={4} command="cd <tab>" />
    <TabCompletion
        top={5}
        left={4}
        items={[
            '.editorConfig',
            '.eslintcache',
            '.eslintignore',
            '.eslintrc.js',
            '.git/',
            '.github/',
            '.gitignore',
            '.nvmrc',
            'CHANGELOG.md',
            'README.md',
            'client/',
            'node_modules/',
            'package-lock.json',
            'package.json',
            'public/',
            'webpack.config.js',
            'webpack.dev.config.js',
            'webpack.test.config.js',
        ]}
    />
</Appear>

---

## Oh-My-Zsh Tab Completion

<Appear top={5}>
    <Highlight top={0} left={4} command="cd <tab>" />
    <TabCompletion
        top={1}
        left={4}
        items={[
            '.editorConfig',
            '.eslintcache',
            '.eslintignore',
            '.eslintrc.js',
            '.git/',
            '.github/',
            '.gitignore',
            '.nvmrc',
            'CHANGELOG.md',
            'README.md',
            'client/',
            'node_modules/',
            'package-lock.json',
            'package.json',
            'public/',
            'webpack.config.js',
            'webpack.dev.config.js',
            'webpack.test.config.js',
        ]}
        steps={[0, 1, 2, 3, 8, 13]}
    />
    <Highlight top={7} left={4} command="git checkout feature-<tab>" />
    <TabCompletion
        top={8}
        left={4}
        items={[
            'feature-cool-thing1',
            'feature-cool-thing2',
            'feature-i-forget',
            'feature-rewrite-everything',
            'feature-super-secret',
            'feature-what-was-i-doing',
            'feature-yes-do-this-now',
        ]}
        steps={[0, 1, 3, 5]}
    />
    <Highlight top={11} left={4} command="git merge -- <tab>" />
    <TabCompletion
        top={12}
        left={4}
        items={[
            '--',
            '--abort',
            '--commit',
            '--continue',
            '--ff',
            '--ff-only',
            '--no-ff',
            '--no-squash',
            '--quiet',
            '--squash',
            '--verbose',
            '--verify',
            '--no-verify',
        ]}
        steps={[0, 1]}
    />
    <Highlight top={17} left={4} command="git add <tab>" />
    <Highlight
        top={18}
        left={4}
        command="git add smart-enough-to-know-what-is-not-staged.js"
    />
</Appear>

---

## Bash History - Static

<Appear top={5}>
    <Highlight top={0} left={4} command="history" />
    <box top={2} left={4}>
        {`    1  clear
    2  node
  ...  misc  ...
  194  git commit -am "Adjusted package.json"
  195  git push origin master`}
    </box>
    <Highlight
        top={8}
        left={4}
        command="history | awk '{print $2}' | sort | uniq -c | sort -rn | head -5ory"
    />
    <box top={10} left={4}>
        {`3386 git
1828 npm
 461 z
 418 cd
 349 ls`}
    </box>
</Appear>

---

## Bash History - Interactive

<Appear top={5}>
    <text top={0} left={0}>{`${global.chalk.bold('Up-Arrow')}: Cycles through most recent history...`}</text>
    <>
        <Highlight top={2} left={4} command="<up-arrow>" />
        <Highlight
            top={3}
            left={4}
            command="echo 'Last command in history'"
        
        />
    </>
    <text top={5} left={0}>{`${global.chalk.bold('Control-R')}: Dynamically searches history as you type...`}</text>
    <>
        <Highlight top={7} left={4} command="<control-r>" />    
        <Highlight top={8} left={4} command="echo $PATH" />
        <text top={9} left={4}>
            bck-i-search: echo_
        </text>
    </>
</Appear>

---

## Oh-My-Zsh History

<Appear top={5}>
    <text top={0} left={0}>{`${global.chalk.bold('Up-Arrow')}: Cycles through most recent history (starts-with)...`}</text>
    <>
        <Highlight top={2} left={4} command="npm i<up-arrow>" />
        <Highlight
            top={3}
            left={4}
            command="npm i eslint-plugin-jsx-a11y -D"
        
        />
    </>
</Appear>

---

## Oh-My-Zsh Spelling Correction

<Appear top={5}>
    <>
        <text top={0} left={0}>{`In ~.zshrc change ENABLE_CORRECTION="true"`}</text>
        <Highlight top={2} left={4} command="mr secrets.txt" />
        <text top={3} left={4}>{`zsh: correct 'mr' to 'rm' [nyae]?`}</text>
    </>
    <>
        <text top={5} left={0}>{`Legend`}</text>
        <text top={7} left={4}>{`n: no, don't correct`}</text>
        <text top={8} left={4}>{`y: yes, do correct`}</text>
        <text top={9} left={4}>{`a: abort, new prompt`}</text>
        <text top={10} left={4}>{`e: edit, update command`}</text>
    </>
    <>
        <text top={12} left={0}>{`Update Prompt`}</text>
        <text top={14} left={4}>{`export SPROMPT="Correct %R to %r? [Yes, No, Abort, Edit] "`}</text>
    </>
    <>
        <text top={16} left={0}>{`Ignore Command`}</text>
        <text top={18} left={4}>{`alias <command>="nocorrect <command>"`}</text>
    </>
</Appear>

---

## Bash Changing Dirs

<Appear top={5}>
    <>
        <text top={0} left={0}>{`The way you might switch to another project...`}</text>
        <Highlight top={2} left={4} pwd="~/project-1" command="cd .." />
        <Highlight top={3} left={4} pwd="~/projects" command="cd project-2" />
    </>
    <text top={5} left={0}>Or combine actions in one command...</text>
    <>
        <Highlight top={7} left={4} pwd="~/project-1" command="cd ../project-2" />
        <Highlight top={8} left={4} pwd="~/project-2" />
    </>
</Appear>

---

## Oh-My-Zsh Changing Dirs

<Appear top={5}>
    <>
        <text top={0} left={0}>{`With zsh ${global.chalk.bold('AUTO_CD')} makes it so you don't have to use ${global.chalk.bold('cd')}`}</text>
        <Highlight top={2} left={4} pwd="~/project-1" command="../project-2" />
        <Highlight top={3} left={4} pwd="~/project-2" />
    </>
    <text top={5} left={0}>{`With zsh use ${global.chalk.bold('cd')} to replace 2nd argument with 1st occurence of 1st argument in current path`}</text>
    <>
        <Highlight top={7} left={4} pwd="~/project-1" command="cd -1 -2" />
        <Highlight top={8} left={4} pwd="~/project-2" />
    </>
</Appear>

---

## Oh-My-Zsh Path Expansion

<text top={5} left={0}>With `zsh` path expansion, you donâ€™t have to type whole directory paths anymore.</text>
<text top={7} left={0}>You can type out part of each directory and `zsh` will try to figure it out.</text>

<Appear top={9}>
    <Highlight top={0} left={4} command="cd /u/l/b" />
    <Highlight top={2} left={4} command="cd /user/local/bin" />
</Appear>

---

## Switch themes in Oh-My-Zsh

<Appear top={5}>
    <>
        <text top={0} left={0}>{`You can change your theme by updating ${global.chalk.bold('ZSH_THEME')} in ${global.chalk.bold('~/.zshrc')}, then sourcing the zshrc`}</text>
        <text top={2} left={4}>{`ZSH_THEME="bureau"`}</text>
        <text top={4} left={4}>{`[Theme Screenshots](https://github.com/robbyrussell/oh-my-zsh/wiki/Themes)`}</text>
    </>
    <text top={6} left={0}>{`If you like to live dangerously, you can set a random theme for each instance!`}</text>
    <>
        <text top={8} left={4}>{`ZSH_THEME="random"`}</text>
        <text top={10} left={4}>{`ZSH_THEME_RANDOM_CANDIDATES=( "robbyrussell" "agnoster" "avit" "bira" "bureau" "gnzh" "nanotech" "sorin" )`}</text>
    </>
</Appear>

---

## Oh-My-Zsh Plugins - git

Oh-My-Zsh already comes preconfigured with the `git` enabled in `~/.zshrc`.

This plugin provides `git` aliases and auto-completions.

```
plugins=(git)
```

---

## Oh-My-Zsh Plugins - Auto Suggestions

The `zsh-autosuggestions` plugin suggests commands as you type based on history and completions.

```
git clone https://github.com/zsh-users/zsh-autosuggestions.git $ZSH_CUSTOM/plugins/zsh-autosuggestions
```

Once you've cloned `zsh-autosuggestions`, then you'll need to append it to the `plugins` section of `~/.zshrc`.

```
plugins=(git zsh-autosuggestions)
```

---

## Oh-My-Zsh Plugins - zsh-syntax-highlighting

The `zsh-syntax-highlighting` plugin enables highlighting of commands whilst they are typed at a zsh prompt into an interactive terminal.

This helps in reviewing commands before running them, particularly in catching syntax errors.

```
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $ZSH_CUSTOM/plugins/zsh-syntax-highlighting
```

Once you've cloned `zsh-syntax-highlighting`, then you'll need to append it to the `plugins` section of `~/.zshrc`.

```
plugins=(git zsh-autosuggestions zsh-syntax-highlighting)
```

---

## Oh-My-Zsh Plugins - z

<text top={5} left={0}>{`The 'z' plugin tracks your most used directories, based on 'frecency'. It'll take you to the most 'frecent' directory that matches ALL of the regexes given on the command line, in order.`}</text>

<text top={8} left={0}>{`'z' is already included with 'Oh-My-Zsh', so you don't need to download it. However, you'll need to append it to the 'plugins' section of '~/.zshrc'.`}</text>

<text top={11} left={4}>
    {`plugins=(git zsh-autosuggestions zsh-syntax-highlighting z)`}
</text>
   
<text top={13} left={0}>{`Here is a sample usage of 'z'`}</text>

<text top={15} left={4}>{`${global.chalk.blue('z')} foo         ${global.chalk.grey('# cd to most frecent dir matching foo')}
${global.chalk.blue('z')} foo bar     ${global.chalk.grey('# cd to most frecent dir matching foo, then bar')}
${global.chalk.blue('z')} -r foo      ${global.chalk.grey('# cd to highest ranked dir matching foo')}
${global.chalk.blue('z')} -t foo      ${global.chalk.grey('# cd to most recently accessed dir matching foo')}
${global.chalk.blue('z')} -l foo      ${global.chalk.grey('# list all dirs matching foo (by frecency)')}`}</text>

---


## Oh-My-Zsh Plugins - Etc...

Here is my current complete plugin list, but there are many others available

```
plugins=(git npm z node brew zsh-autosuggestions zsh-syntax-highlighting)
```

* [Official Plugins](https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins)
* [Open Source Plugins](https://github.com/unixorn/awesome-zsh-plugins)

---

## Get rid of that last login message

<Appear top={5}>
    <>
        <text top={0} left={0}>{`When you create a new session, do you wish you could get rid of this message?`}</text>
        <box top={2} left={4}>Last login: Sun Nov 17 21:40:59 on ttys004</box>
    </>
    <>
        <text top={4} left={0}>{`Thankfully, it's easy as...`}</text>
        <Highlight
            top={6}
            left={4}
            command="touch ~/.hushlogin"
        />
        <CopyButton top={8} left={0} textToCopy="touch ~/.hushlogin" />
    </>
</Appear>

---

## String Together Commands - Piping

<Code top={5} left={0} code="devpun" />
<box top={6} left={40} width={30} height={4} border={{ type: 'none' }}>
    <text top={0} left={4}>â€¢ devpun -t react</text>
    <text top={1} left={4}>â€¢ cowsay -f vader</text>
    <text top={2} left={4}>â€¢ lolcatjs</text>
</box>

---

## Add aliases for long Terminal commands

You can print out a list of all available aliases with the following command.

```
alias
```

Other than `git` (there is a whole section about that later), here are a few small examples of helpful aliases.

```
alias ...=../..
alias l='ls -lah'
alias ls='ls -F --color=always --group-directories-first'
alias ll='ls -la'
alias zshrc="vim ~/.zshrc"
alias zshrcs="source ~/.zshrc"
```

---

## Quickly see the calendar

<Code top={5} left={0} code="cal -3" />
<box top={6} left={40} width={20} height={4} border={{ type: 'none' }}>
    <text top={0} left={4}>â€¢ cal -3</text>
    <text top={1} left={4}>â€¢ cal -y</text>
    <text top={2} left={4}>â€¢ cal 12 1976</text>
</box>

---

## Provide feedback to long running cmds

<Appear top={5}>
    <>
        <text top={0} left={0}>{`Sometimes we run really long node processes and it's easy to get distracted and forget to come back to them.`}</text>
        <text top={2} left={4}>{`alias beep='echo -e "\a"'
alias tada='play-sound ~/manorisms/tada.mp3'                   ${global.chalk.grey('# npm i play-sound-cli -g')}
alias toast='notify -t "Toast" -m "Command Complete" -s Glass' ${global.chalk.grey('# npm i node-notifier-cli -g')}`}</text>
    </>
    <text top={6} left={0}>{`So, how would you use these aliases?`}</text>
    <text top={8} left={4}>{`${global.chalk.green('npm')} install && ${global.chalk.green('beep')}
${global.chalk.green('npm')} test && ${global.chalk.green('tada')}
${global.chalk.green('npm')} run build && ${global.chalk.green('toast')}`}</text>
    <text top={12} left={0}>{`But what about parameters? We'll talk about that in the 'CUSTOM' section.`}</text>
</Appear>

---

## Kick up a quick web server - Python

<Appear top={5}>
    <>
        <Highlight
            top={0}
            left={4}
            command="python -m SimpleHTTPServer 8000"
        />
        <CopyButton top={2} left={4} textToCopy="python -m SimpleHTTPServer 8000" />
    </>
    <>
        <text top={6} left={0}>{`This would be a great candidate for an alias!`}</text>
        <text top={8} left={4}>{`${global.chalk.green('alias')} server=${global.chalk.yellow('"python -m SimpleHTTPServer 8080"')}`}</text>
    </>
</Appear>

---

## Kick up a quick web server - Node

<Highlight top={5} left={0} command="npm install serve -g" />
<Highlight top={7} left={0} command="serve" />
<CopyButton top={9} left={0} textToCopy="serve" />

